<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8" />
  <title>DreamCatcher</title>
  <style type="text/css">
    body {
      margin: 0;
      padding: 0;
      background: #000000;
    }
  </style>
</head>
<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/2.6.2/phaser.min.js"></script>
  <script>
    var TeclaPresionada = false;
    var MeteoritosTotales = 80;
    var MeteoritosIndestructibles = 15;
    var EstrellasTotales = 100;
    var GemasTotales = 15;

    EstadosGalaxyGem = {
      init: function () {
        GalaxyGem.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
        GalaxyGem.scale.pageAlignHorizontally = true;
        GalaxyGem.scale.pageAlignVertically = true;
        this.BIMPresionado = false;
        this.MeteoritosImpactados = 0;
        this.JuegoTerminado = false;
      },

      preload: function () {
        // Fondo
        this.load.image('fondo', 'https://github.com/ChristianJHR/proyecto12/blob/main/Captura%20de%20pantalla%202025-07-02%20151753.png?raw=true');

        // Naves (todas la misma imagen)
        const naveURL = 'https://github.com/ChristianJHR/proyecto12/blob/main/Captura%20de%20pantalla%202025-07-02%20151741.png?raw=true';
        this.load.image('nave', naveURL);
        this.load.image('nave1', naveURL);
        this.load.image('nave2', naveURL);
        this.load.image('nave3', naveURL);
        this.load.image('nave4', naveURL);

        // Meteoritos (rompibles e indestructibles usan la misma imagen)
        const meteoritoURL = 'https://github.com/ChristianJHR/proyecto12/blob/main/pngtree-cartoon-target-bullseye-png-image_9255711.png?raw=true';
        this.load.image('meteoritos', meteoritoURL);
        this.load.image('meteoritos2', meteoritoURL);

        // Gema (moneda)
        this.load.image('gema', 'https://github.com/ChristianJHR/proyecto12/blob/main/moneda_centenario_50_pesos_oro-e1634906585624.png?raw=true');

        // Proyectil
        this.load.image('proyectil', 'https://github.com/ChristianJHR/proyecto12/blob/main/Captura%20de%20pantalla%202025-07-02%20152647.png?raw=true');

        // Audios
        this.load.audio('musicaFondo', 'assets/audio/musica_ambiente.mp3');
        this.load.audio('sonidoMariposa', 'assets/audio/mariposa_especial.mp3');
        this.load.audio('sonidoGanador', 'assets/audio/victoria_sonido.mp3');
        this.load.audio('sonidoPerdedor', 'assets/audio/derrota_sonido.mp3');
        this.load.audio('sonidoCapturar', 'assets/audio/red_movimiento.mp3');

        // Partículas (estrella bitmap)
        for (let i = 1; i <= 3; i++) {
          let estrellaGraphic = GalaxyGem.add.bitmapData(10, 10);
          let color = GalaxyGem.rnd.pick(['#ffffff', '#e3f2fd', '#bbdefb']);
          estrellaGraphic.ctx.fillStyle = color;
          estrellaGraphic.ctx.beginPath();
          estrellaGraphic.ctx.arc(5, 5, 3, 0, Math.PI * 2);
          estrellaGraphic.ctx.fill();
          GalaxyGem.cache.addBitmapData('estrella' + i, estrellaGraphic);
        }

        // Explosión bitmap 1
        let explosionGraphic = GalaxyGem.add.bitmapData(60, 60);
        explosionGraphic.ctx.fillStyle = '#ff9800';
        explosionGraphic.ctx.beginPath();
        explosionGraphic.ctx.arc(30, 30, 25, 0, Math.PI * 2);
        explosionGraphic.ctx.fill();
        explosionGraphic.ctx.fillStyle = '#ffeb3b';
        explosionGraphic.ctx.beginPath();
        explosionGraphic.ctx.arc(30, 30, 15, 0, Math.PI * 2);
        explosionGraphic.ctx.fill();
        GalaxyGem.cache.addBitmapData('explosion', explosionGraphic);

        // Explosión bitmap 2
        let explosion2Graphic = GalaxyGem.add.bitmapData(80, 80);
        explosion2Graphic.ctx.fillStyle = '#f44336';
        explosion2Graphic.ctx.beginPath();
        explosion2Graphic.ctx.arc(40, 40, 35, 0, Math.PI * 2);
        explosion2Graphic.ctx.fill();
        explosion2Graphic.ctx.fillStyle = '#ff9800';
        explosion2Graphic.ctx.beginPath();
        explosion2Graphic.ctx.arc(40, 40, 25, 0, Math.PI * 2);
        explosion2Graphic.ctx.fill();
        explosion2Graphic.ctx.fillStyle = '#ffeb3b';
        explosion2Graphic.ctx.beginPath();
        explosion2Graphic.ctx.arc(40, 40, 15, 0, Math.PI * 2);
        explosion2Graphic.ctx.fill();
        GalaxyGem.cache.addBitmapData('explosion2', explosion2Graphic);
      },

      create: function () {
        // Aquí iría el código de create tal como lo escribiste en tu versión original
        // ...
      },

      update: function () {
        // Aquí iría el código de update tal como lo escribiste
        // ...
      }
    }

    alert("¡Da click en el centro de la pantalla para jugar! \n Presiona F5 para reiniciar el juego\n Utiliza las direccionales para moverte");
    var GalaxyGem = new Phaser.Game(1280, 720, Phaser.CANVAS);
    GalaxyGem.state.add('MiJuegoGG', EstadosGalaxyGem);
    GalaxyGem.state.start('MiJuegoGG');
  </script>
</body>
</html>
